<div class="journal-entries">
  <h1>Journal Entries</h1>

  @if (loading()) {
    <div class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading journal entries...</span>
    </div>
  } @else {
    <!-- Search Filters Component -->
    <app-journal-entries-filters
      [searchFilters]="searchFilters()"
      (filtersChange)="updateSearchFilters($event)"
      (clearSearch)="clearSearch()"
    ></app-journal-entries-filters>

    <!-- Summary Cards -->
    <div class="summary-cards">
      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-label">Total Entries</div>
          <div class="summary-value">{{ totalFilteredRecords() }}</div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-label">Total Debits</div>
          <div class="summary-value debit">{{ totalDebits() }}</div>
        </mat-card-content>
      </mat-card>
      
      <mat-card class="summary-card">
        <mat-card-content>
          <div class="summary-label">Total Credits</div>
          <div class="summary-value credit">{{ totalCredits() }}</div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Create New Journal Entry -->
    <h2 class="title">Create New Journal Entry</h2>
    <app-journal-entries-form 
    [form]="createForm"
    (create)="createEntry()"
    ></app-journal-entries-form>


    <!-- Journal Entries Table -->
    <h2 class="title">Journal Entries</h2>
    <app-journal-entries-table
      [journalEntries]="journalEntries()"
      [entryControls]="entryControls"
      [selectedEntry]="selectedEntry()"
      (reverse)="reverseEntry($event)"
      (select)="selectEntry($event)"
    >
    </app-journal-entries-table>

    <!-- Pagination -->
    <mat-card class="pagination-card">
      <mat-card-content>
        <div class="pagination">
          <div class="pagination-info">
            Showing {{ journalEntries().length }} of {{ totalFilteredRecords() }} entries
          </div>
          <div class="pagination-controls">
            <button 
              mat-raised-button 
              (click)="previousPage()" 
              [disabled]="(searchFilters().offset || 0) === 0"
            >
              <mat-icon>chevron_left</mat-icon>
              Previous
            </button>
            <button 
              mat-raised-button 
              (click)="nextPage()" 
              [disabled]="journalEntries().length < (searchFilters().limit || 50)"
            >
              Next
              <mat-icon>chevron_right</mat-icon>
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  }
</div>