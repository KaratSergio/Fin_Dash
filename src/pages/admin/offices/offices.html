<div class="offices-admin">
  <h1>Offices Admin Panel</h1>

  @if (loading()) {
  <div>Loading...</div>
  } @else {
  @if (error()) {
  <div class="error">{{ error() }}</div>
  } @else {

  <h2>Create New Office</h2>
  <div class="create-office">
    <input placeholder="Name" #nameInput [value]="newOffice().name"
      (input)="updateNewOfficeField('name', nameInput.value)">

    <input placeholder="External ID" #externalInput [value]="newOffice().externalId"
      (input)="updateNewOfficeField('externalId', externalInput.value)">

    <input placeholder="Parent ID" #parentInput [value]="newOffice().parentId"
      (input)="updateNewOfficeField('parentId', +parentInput.value)">

    <input placeholder="Opening Date" #openingInput type="date" [value]="newOffice().openingDate"
      (input)="updateNewOfficeField('openingDate', openingInput.value)">

    <button (click)="createOffice()">Create Office</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>External ID</th>
        <th>Parent ID</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (office of offices(); track office.id) {
      <tr>
        <td>{{ office.id }}</td>
        <td><input [value]="office.name" #nameInput (input)="office.name = nameInput.value"></td>
        <td><input [value]="office.externalId" #externalInput (input)="office.externalId = externalInput.value"></td>
        <td><input [value]="office.parentId" #parentInput (input)="office.parentId = +parentInput.value"></td>
        <td>
          <button (click)="updateOffice(office)">Save</button>
          <button (click)="deleteOffice(office.id)">Delete</button>
        </td>
      </tr>
      } @empty {
      <tr>
        <td colspan="5">No offices found</td>
      </tr>
      }
    </tbody>
  </table>

  }
  }
</div>