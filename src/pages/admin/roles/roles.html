<div class="roles-admin">
    <h1>Roles <span [routerLink]="['/admin']">[admin]</span></h1>

    @if (loading()) {
    <div>Loading...</div>
    } @else {
    @if (error()) {
    <div class="error">{{ error() }}</div>
    } @else {

    <h2 class="title">Create New Role</h2>
    <div class="create-role">
        <input placeholder="Name" #nameInput [value]="newRole().name"
            (input)="updateNewRoleField('name', nameInput.value)">

        <input placeholder="Description" #descInput [value]="newRole().description"
            (input)="updateNewRoleField('description', descInput.value)">

        <button (click)="createRole()">Create Role</button>
    </div>

    <h2 class="title">List Of Roles</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (role of roles(); track role.id) {
            <tr>
                <td><input [value]="role.name" #nameInput (input)="role.name = nameInput.value"></td>
                <td><input [value]="role.description ?? ''" #descInput (input)="role.description = descInput.value">
                </td>
                <td>{{ role.disabled ? 'Disabled' : 'Enabled' }}</td>
                <td>
                    <button (click)="updateRole(role)">Update</button>
                    <button (click)="deleteRole(role.id)">Delete</button>
                    <button (click)="toggleRole(role)">
                        {{ role.disabled ? 'Enable' : 'Disable' }}
                    </button>
                </td>
            </tr>
            } @empty {
            <tr>
                <td colspan="4">No roles found</td>
            </tr>
            }
        </tbody>
    </table>

    }
    }
</div>